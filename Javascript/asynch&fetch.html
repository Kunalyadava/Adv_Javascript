<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<!-- Synchronous programming is a blocking method where each task
must wait for the previous task to complete before executing .
Asychronous programming is a non blocking method where multiple tasks can be executed 
simultaneously ,waithout waiting for each other to complete -->






<!-- when we try to execute any javascript code GEC is created and pushed inside the call stack -->



    <!-- - To make async programming possible JS alone isn’t enough, we also need WEB broswer APIs
These Web APIs makes asynchronous programming possible

- setTimeout
- setInterval
- Local Storage
- fetch -->
</body>
</html>
<script>
//     console.log("1")
// setTimeout(function test(){
// 	console.log("2")
// },5000)

// console.log("3")
// 1,3,2 ?
// - JS run time environment consists of following parts
//     - Memory Heap: Stores all variables
//     - Call stack: Whenever you execute code functions are pushed onto
//      callstack and whenever functions returns it pops out of call stack
//    js doesn't have any api like localstorage ,promise ,Dom ,fetch
//     - WEB APIs: SetTimeout, setInterval, Promise, Remember these APIs 
//     are provided by browser. and it wraps everything in window object and gives access to call stack
//     - Call stack Queue: FIFO DS
//     - Event loop: has only one job, check if callstack is empty, if yes push
//      an item from queue into stack



// console.log("Kunal")
// setTimeout(()=>{
//     console.log("Hello World")
// },3000)

// setTimeout(()=>{
//     console.log("Bye World")
// },6000)
// console.log("Kumar")

// kunal
//kumar
//Hello world
//bye world

// ## setInterval:

// - which repeats after certain amount of time
// Syntax:
// `setInterval(function,interval_in_ms)`

// console.log("He came")
// setInterval(()=>{
//     console.log("He Sat")
// },5000)
// console.log("He Went Away")
//output he came
/// he went away
//he sat he sat he sat he sat...............



// console.log("TimeStart")
// let i=0
// let interval=setInterval(function(){
//   console.log("Timeout")
//   i++
//   if(i==10){
//     clearInterval(interval)
//   }

// },1000)
// console.log("Timein")

// </script>
<!-- <body>
    <h1></h1>
</body>
</html>

<script>
let count = 100;
let count_id=setInterval(function () {
count--;
console.log(count);
document.querySelector("h1").innerText=count
},1000);
// output 99,98,97,96............
</script> -->






<!-- ///Timer -->
<!-- 
<body>
    <h1></h1>
    <button onClick="start()">Start Timer</button>
    <button onClick="stop()">Stop Timer</button>
  </body>
</html>

<script>
  let i = 0;
  let id
  function start() {
     id = setInterval(function () {
      i++;
      console.log(i);
      document.querySelector("h1").innerText = i;
    }, 1000);
  }

  function stop() {
    clearInterval(id);
    document.querySelector("h1").innerText = "Timer stopped";
  }
</script> -->



<!-- 
<body>
    <h1></h1>
  </body>
</html>

<script>
  let i = 0;
  let id = setInterval(function () {
    i++;
    console.log(i);
    document.querySelector("h1").innerText = i;
    if (i === 5) {
      clearInterval(id);
      document.querySelector("h1").innerText = "Timer stopped";

    }
  }, 1000);
</script> -->



  
  <!-- <style>
    * {
      margin: 0;
      padding: 0;
    }

    #clock {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #7fbad5;
      /* direction,color1,color2...link--- */
    }

    #clock > div {
      padding: 30px;
      margin: 30px;
      border-radius: 20px;
      background-color: rgb(255, 153, 0);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 50px;
      box-shadow: 5px 5px 23px #7b5717, -5px -5px 23px #ffc535;
    }

    span {
      font-size: 40px;
    }
  </style>
  <div id="clock">
    <div id="hours">hours</div>
    <span>:</span>
    <div id="minutes">min</div>
    <span>:</span>
    <div id="seconds">SECONDs</div>
    <div id="half">AM/PM</div>
  </div>
  <script>
     function clock() {
      var date =new Date();
    //   console.log(date)
      var hours = date.getHours();
    //   console.log(hours)
      var minutes = date.getMinutes();
      var seconds = date.getSeconds();
      var half = "";
      if (hours >= 12) {
        half = "PM";
      } else {
        half = "AM";
      }
      document.getElementById("hours").innerHTML = hours;
      document.getElementById("minutes").innerHTML = minutes;
      document.getElementById("seconds").innerHTML = seconds;
      document.getElementById("half").innerHTML = half;
      setTimeout(clock, 1000);
    };

    clock();
    // here we used clock(); for calling the function again and again
  </script>
</body>
</html> -->





<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Promises</title>
</head>
<body>
  A Promise is an object representing the eventual completion or failure of an asynchronous operation.
  A common need of promise is to execute two or more asynchronous operations back to back, 
  where each subsequent operation starts when the previous operation succeeds,
   with the result from the previous step.
  <p>
  A promise is an object that may produce a single value some time in the future:
   either a resolved value, or a reason that it’s not resolved.
     A Promise can have one of three states
    fulfilled  : meaning that the operation completed successfully
    rejected   : meaning that the operation failed
    pending :which is initial state, neither fulfilled nor rejected.

</p>

    
    - How to fulfil or reject?
    - We need to pass a function to the`Promise Constructor`. 
    That function is called the`executor function`
     The executor function takes two arguments,
     `resolve`and`reject`. These two are callback functions for the 
     executor to announce an outcome.


     const promise = new Promise((resolve,reject)=>{})

     The resolve method indicates successful completion of the task(got drinks),
      and the rejectmethod indicates an error(no drink). You do not implement
       the resolve/reject method. JavaScript provides it to you. You need to 
       call them from the executor function.


    - resolve and reject both are promises
    - Resolve will be called when change of status from pending to full-filled.
    - reject will be called when change of status from pending to rejected.

 


</body>
<!-- <script>

let  promise= new Promise((res,rej)=>{
 	//change of status from pending to fullfilled.
  res("Got drink")
})
console.log(promise) //Promise {<fulfilled>: 'Got drink'}





  let  promise2= new Promise((res,rej)=>{
    	//change of status from pending to rejected.
  rej("Didn't Get drink")
})

console.log(promise2) //Promise {<rejected>: "Didn't Get drink"}
                        // Uncaught (in promise) Didn't Get drink


</script> -->
<!-- - Promise status : pending to fullfilled ? .then() is executed
- Promise status : pending to rejected ? .catch() is executed
- We get a `.then()`method from every promise. The sole purpose 
of this method is to let the consumer know about the outcome of a promise.
 It accepts two functions as arguments, `result`and `error`. -->

<!-- <script>
  console.log("Apple")
</script>
<script>
 
  let promise5=new Promise((res,rej)=>{
  setTimeout(()=>{
     //res("Promise Resolved")
      rej("Promise rejected") 
     
    },2000)
  })
   console.log(promise5)  //pending
  promise5
  .then(function(response){
    console.log("okay")
    console.log(response)
    console.log(promise5) //fullfilled
  })

  .catch((error)=>{
    console.log("Not Okay")
    console.log(error)
    console.log(promise5)//rejected
  })
console.log(window)
</script> -->
</html>




<!-- <script>


const countValue = 0;
let promiseCount = new Promise(function (resolve, reject) {
    if (countValue>0) {
        resolve("The count value is positive.");
    } else {
        reject("Negative count value!");
    }
});


promiseCount
.then(res => console.log(res))
.catch(ress => console.log(ress))
</script> -->

  <!-- <body>
    <input type="number" />
    <button onClick="checkOTP()">Submit</button>
  </body>
</html>

<script>
  function checkOTP() {
    let otp = document.querySelector("input").value;
    let otpPromise = new Promise((resolve, reject) => {
      setTimeout(() => {
        if (otp == 1234) {
          resolve("correct OTP pin");
        } else {
          reject("incorrect OTP pin");
        }
      }, 2000);
    });

    otpPromise.then((val) => console.log(val))
    .catch((err) => console.log(err));
  }
</script> -->
<body>
  API is the acronym for application programming interface —
   a software intermediary that allows two applications to talk to each other.
    APIs are an accessible way to extract and share data within and across organizations.

    //fetch is used to get the data over the network
    let promise=fetch(url,[options])
    //getting a response is 2-stage process
   // The Fetch API uses Request and Response objects 



    JSON stands for JavaScript Object Notation
JSON is a lightweight format for storing and transporting data
JSON is often used when data is sent from a server to a web page
JSON is "self-describing" and easy to understand
</body>
<script>
//  console.log( fetch('https://jsonplaceholder.typicode.com/todos')) //Promise {<pending>}
//fetch('https://jsonplaceholder.typicode.com/todos').then((res)=>console.log(res)) 
       //Response {type: 'cors', url: 'https://jsonplaceholder.typicode.com/todos', redirected: false, status: 200, ok: true, …}
//fetch('https://jsonplaceholder.typicode.com/todos').then((res)=>console.log(res.json())) //Promise {<pending>}

// let x=fetch('https://jsonplaceholder.typicode.com/todos').then((res)=>(res.json()))
// .then((data)=>console.log(data))
//  .catch((err)=>console.log(err))
      
// let url="https://jsonplaceholder.typicode.com/todos"
//    fetch(url)
//    .then((value)=>(value.json()))      //this .then is returning a promise but not value it will be fulfilled in future
//    .then((data)=>console.log(data))    //this .then will be called by js after resolving 1st .then and it will return data 
//    .catch((err)=>console.log(err))
  
      //  console.log(x)
</script>
<script>
  // let p=fetch("https://jsonplaceholder.typicode.com/todos")
  // p.then((response)=>{
  //   console.log(response.status)
  //   console.log(response.ok)
  //   return response.text()
  // }).then((value)=>{
  //   console.log(value)
  // })
</script>
<body>
  Async Await
  An async function always returns a zero
  other values are wrapped in a promise automatically

  you can control the flow of your programme as it pleases you 
  if we want to code in javascript , then we used to do like the 1st code will run
  the second code will run then the third code will run then call back will run
  then 4th code will run then callback will run, here we are unable to stop the execution

  different different async functions executed in parallel





</body>


<script>




//   async function harry(){
//     return 5
//   }
//   // harry().then((x)=>{
//   //   alert(x)

//   // })
//   harry().then (function(x){
// alert(x)
//   })
</script>
<script>
  
  async function harry(){
    let delhiWeather=new Promise((res,rej)=>{
    setTimeout(()=>{
      res("27 Degree")

    },2000)
  })

    let bloreWeather=new Promise((res,rej)=>{
    setTimeout(()=>{
      res("28 Degree")

    },7000)
   })
  //  delhiWeather.then(alert)
  //  bloreWeather.then(alert)
  console.log("fetching Delhi weather please wait...")
  let delhiW= await delhiWeather
  console.log("fetched Delhi weather"+ delhiW)
  console.log("fetching banmgalore weather please wait...")
  let bloreW=await bloreWeather
  console.log("fetched bangalore weather" + bloreW)
  return [delhiW,bloreW]
  
  }
  console.log("welcom to weather control room")
  // console.log(harry())
  harry().then((response)=> console.log(response))
   
</script>