<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
</html>
<script>
    let data = [
  { name: "John", subject: "Javascript" },
  { name: "John", subject: "HTML" },
  { name: "John", subject: "CSS" },
  { name: "Pete", subject: "Java" },
  { name: "Pete", subject: "English" },
  { name: "Pete", subject: "Maths" },
  { name: "Mary", subject: "Rust" },
  { name: "Mary", subject: "Elm" },
]

let subjectHash = data.reduce((acc, item) => {
  // iteration 2 - acc: {John: ["Javascript"]}
  // iteration 2 - item: { name: "John", subject: "HTML" },

  // if there is already a value assgned to acc[item.name] start from there else assign an empty array to it.
  
  acc[item.name] = acc[item.name] || [];
  acc[item.name].push(item.subject);
  
  
  // iteraction 1 - acc: {John: ["Javascript"]}
  return acc;
}, {})

console.log(subjectHash);
/*
Expected output:
{
  John: ["Javascript", "HTML", "CSS"],
  Pete: ["Java", "English", "Maths"],
  Mary: ["Rust", "Elm"]
}
*/

/*
 - Use proper array methods to create an object from the data arrray.
 - from the data, the name would become the key of the new object.
 - keys must be unique, one key per user.
 - the value would be an array of their subjects.
*/
</script>


<script>
    let prateekMarksData = {
  name: "Prateek",
  subject1: "Javascript",
  subject2: "HTML",
  subject3: "CSS",
  subject4: null,
  subject5: null,
  marks1: 90, 
  marks2: 81,
  marks3: 80,
  marks4: null,
  marks5: null,
}

let nrupulMarksData = {
  name: "Nrupul",
  subject1: "Java",
  subject2: "Pyton",
  subject3: null,
  subject4: null,
  subject5: null,
  marks1: 95, 
  marks2: 85,
  marks3: null,
  marks4: null,
  marks5: null,
}

let allStudentsMarksData = [prateekMarksData, nrupulMarksData];

let massagedData = allStudentsMarksData.reduce((acc, item) => {
  // iteration 1 : acc = []
  // item = {}
  
  let obj = {};
  obj.name = item.name;
  obj.marks = [];
  
  for (let i=1; i<=5; i++) {
    item[`subject${i}`] && obj.marks.push(
      {
        subject: item[`subject${i}`], 
        score: item[`marks${i}`]
      }
    )   
  }
  
  acc.push(obj);
  return acc;
}, [])

console.log(massagedData);

/*
 ------------------------------------------------
 massage the `allStudentsMarksData` to get a new 
 array called `massagedData`

 Instead of separate enties for 5 subjects and their marks,
 in the new array, we just have one entry called marks. 
 marks is an array of objects. the objects of marks
 contains subject and score.
 ------------------------------------------------

  Expected output from `massagedData`

  [
     {
       name: "Prateek", 
       marks: [
         {subject: 'Javascript', score: 90},
         {subject: 'HTML', score: 81},
         {subject: 'CSS', score: 80}
       ]
     },
     {
       name: "Nrupul", 
       marks: [
         {subject: 'Java', score: 95},
         {subject: 'Python', score: 85}
       ]
     },

  ]

*/


</script>

<script>
// Gentle introduction to Poly-filling
//when we have to give an instruction like if a particular functaniolity is not already available
//you somehow are able to add functanility to it


// we can basically add change remove of any inbuilt functanility of any
//javascript object by using pro filling



// let arr = ["one", "two", "three"]

// // bacchanify()
// // you should be able to invoke arr.bacchanify()
// // it will give you back a new array
// // in every item, ji will be appended
// // result output: ["one ji", "two ji", "three ji"]

// Array.prototype.bacchanify = function() {
//   // this points to the arr before the dot
//   let newArr = this.map(item => item + ' ji')
//   return newArr;
// }

// let newArr = arr.bacchanify() 
// console.log(newArr) //["one ji", "two ji", "three ji"]

// let arr2 = ["A", "O", "Lo", "Suno"];
// let baccanifiedArr2 = arr2.bacchanify() 
// console.log(baccanifiedArr2) // ["A ji","O ji","Lo ji","Suno ji"]




</script>